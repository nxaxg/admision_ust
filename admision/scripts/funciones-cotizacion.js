(function(e,f,h){var g;h('[data-name="selector-region"]').change(function(){var a=h(this).val();var b=h(this).parents("form").find('[data-name="selector-comuna"]');b.addClass("loading");h.ajax({url:"/ajax-selector/",method:"GET",cache:true,data:{action:"st_crm_ajax",funcion:"selector_comuna",region:a},dataType:"html"}).done(function(c){b.removeClass("loading").html(c)})});h('[data-name="selector-comuna"]').change(function(){var a=h(this).val();var b=h(this).parents("form").find('[data-name="selector-colegio"]');b.addClass("loading");h.ajax({url:"/ajax-selector/",method:"GET",cache:true,data:{action:"st_crm_ajax",funcion:"selector_colegio",comuna:a},dataType:"html"}).done(function(c){b.removeClass("loading").html(c)})});h('[data-name="selector-sede"]').change(function(){var a=h(this).val();var b=h(this).parents(".career-combo-fields").find('[data-name="selector-jornada"]');b.addClass("loading");h.ajax({url:"/ajax-selector/",method:"GET",cache:true,data:{action:"st_crm_ajax",funcion:"selector_jornada",sedes:a},dataType:"html"}).done(function(c){b.removeClass("loading").html(c)})});h('[data-name="selector-jornada"]').change(function(){var b=h(this).val();var a=h(this).parents(".career-combo-fields").find('[data-name="selector-sede"]').val();var c=h(this).parents(".career-combo-fields").find('[data-name="selector-carrera"]');c.addClass("loading");h.ajax({url:"/ajax-selector/",method:"GET",cache:true,data:{action:"st_crm_ajax",funcion:"selector_carrera",sedes:a,jornada:b},dataType:"html"}).done(function(d){c.removeClass("loading").html(d)})});h('[name="contacto-telefono-codigo"]').change(function(){var a=h(this).val();h('[name="contacto-telefono-numero"]').val("");h('[name="contacto-telefono-numero"]').removeAttr("maxlength");if(a!="2"){h('[name="contacto-telefono-numero"]').attr("maxlength",7);h('[name="contacto-telefono-numero"]').attr("data-min",7)}if(a=="2"){h('[name="contacto-telefono-numero"]').attr("maxlength",8);h('[name="contacto-telefono-numero"]').attr("data-min",8)}});h('[name="cotizacion-ano-egreso"], [name="ano-egreso"]').change(function(){var a=h(this).val();if(a=="antes del 2006"){h(this).after('<div class="input-group inline-group"> <label class="regular-label " for="egresadoanotyped">Egresado el año</label> <input id="resadoanotyped" type="text" data-custom-validation="onlyNumbersEgreso" placeholder="Escribe tu año de egreso" name="cotizacion-ano-egreso-typed" maxlength="4"  minlength="4" data-min="4" class="regular-input inline-input required" required></div>')}else{h(this).next().remove()}});h('[data-name="input-rut"]').on("keydown",function(a){var b=h(this).val();b=b.replace(/\./g,"");h(this).val(b)});h('[data-events="paste"]').on("keydown",function(a){if(a.ctrlKey==true&&(a.which=="118"||a.which=="86")){a.preventDefault()}});h('[data-name="input-rut"]').blur(function(){var c=h(this).val();c=c.replace(/\./g,"");var a=h(this).parents("form");var b=h(this);h.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"st_crm_ajax",funcion:"verificar_rut_form","contacto-rut":c},dataType:"json"}).done(function(m){g=m.contacto;var n="";if(m.response.Codigo=="1"){var d='<input type="hidden" name="contactId" value="'+m.contacto.Id+'" />';var l='<input type="hidden" name="claveAjax" value="existente" />';n=d+l;a.find('[data-ws="name.first"]').attr("data-ws_value",m.contacto.name.first);a.find('[data-ws="name.last"]').attr("data-ws_value",m.contacto.name.last);a.find('[data-ws="mobilePhone.number"]').attr("data-ws_value",m.contacto.mobilePhone.number);a.find('[data-ws="phone.number"]').attr("data-ws_value",m.contacto.phone.number);a.find('[data-ws="email"]').attr("data-ws_value",m.contacto.email)}if(m.response.Codigo=="0"){n='<input type="hidden" name="claveAjax" value="nuevo" />'}h('[name="contactId"]').remove();h('[name="claveAjax"]').remove();a.append(n)})});h("[data-ws]").blur(function(){if(h(this).parents("form").find('[name="claveAjax"]').val()=="existente"){if(h(this).attr("data-ws")=="mobilePhone.number"){var d=h(this).parents("form").find('[name="contacto-celular-codigo"]').val();var a=h(this).val();var b=d+a;if(b!=h(this).attr("data-ws_value")){h('[name="claveAjax"]').remove();var c='<input type="hidden" name="claveAjax" value="update" />';h(this).parents("form").append(c)}return}if(h(this).attr("data-ws")=="phone.number"){var d=h(this).parents("form").find('[name="contacto-telefono-codigo"]').val();var a=h(this).val();var b=d+a;if(b!=h(this).attr("data-ws_value")){h('[name="claveAjax"]').remove();var c='<input type="hidden" name="claveAjax" value="update" />';h(this).parents("form").append(c)}return}if(h(this).attr("data-ws_value")!=h(this).val()&&h(this).val()!=""){h('[name="claveAjax"]').remove();var c='<input type="hidden" name="claveAjax" value="update" />';h(this).parents("form").append(c);return}console.log("error de status de usuario")}});h(e).on("validarUsuario",function(b,d,c,a){var j=h.extend({},{action:"st_crm_ajax",funcion:"check_crear_usuario"},c);h.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:j,dataType:"json"}).done(function(i){})})}(this,this.document,jQuery));
