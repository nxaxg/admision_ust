/*!
 *  jQuery Scrollstop Plugin v1.2.0
 *  https://github.com/ssorallen/jquery-scrollstop
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(e){var b=e.event.dispatch||e.event.handle;var a=e.event.special,d="D"+(+new Date()),c="D"+(+new Date()+1);a.scrollstart={setup:function(h){var g=e.extend({latency:a.scrollstop.latency},h);var i,f=function(l){var j=this,k=arguments;if(i){clearTimeout(i)}else{l.type="scrollstart";b.apply(j,k)}i=setTimeout(function(){i=null},g.latency)};e(this).bind("scroll",f).data(d,f)},teardown:function(){e(this).unbind("scroll",e(this).data(d))}};a.scrollstop={latency:250,setup:function(h){var g=e.extend({latency:a.scrollstop.latency},h);var i,f=function(l){var j=this,k=arguments;if(i){clearTimeout(i)}i=setTimeout(function(){i=null;l.type="scrollstop";b.apply(j,k)},g.latency)};e(this).bind("scroll",f).data(c,f)},teardown:function(){e(this).unbind("scroll",e(this).data(c))}}}));(function(a,b){var c=b(a);a.NinjaStickyBox=function(f,g,e){var d=this;d.$element=b(f);d.parentSelector=d.$element.data("stickybox");d.$parent=b(d.parentSelector);d.isScrolling=false;d.position_offset=g||0;d.fixed_class="sticky-box-fixed";d.callbacks=e||{};d.setVars();d.init()};a.NinjaStickyBox.prototype={init:function(){var d=this;c.on("scroll scrollstart scrollstop",b.proxy(d.handleScroll,d));c.on("resize",b.proxy(d.handleResize,d));d.handleMovement()},setVars:function(){var d=this;d.element_offset=d.$element.offset();d.element_width=d.$element.outerWidth();d.element_height=d.$element.outerHeight();d.parentOffset_top=d.$parent.offset().top;d.parentOffset_bottom=d.getBottomOffset(d.$parent);d.scrollTop=c.scrollTop();d.critial_pos=d.parentOffset_top-d.position_offset},getBottomOffset:function(d){return d.offset().top+d.outerHeight()},handleResize:function(){var d=this;d.$element.removeClass(d.fixed_class).css({width:"auto",left:"auto",top:"auto"});d.setVars();d.handleMovement()},handleScroll:function(e){var d=this;d.scrollTop=c.scrollTop();if(e.type==="scrollstart"){d.isScrolling=true;d.handleMovement()}else{if(e.type==="scrollstop"){d.isScrolling=false}}},handleMovement:function(){var e=this,d=e.scrollTop+e.position_offset+e.element_height,h=d>=e.parentOffset_bottom,f,g;if((e.scrollTop>=e.critial_pos)&&!h){e.callbacks.engage&&e.callbacks.engage(e.$element,e);f={width:e.element_width+"px",left:e.element_offset.left+"px",top:e.position_offset+"px"};e.$element.addClass(e.fixed_class)}else{if(h){e.callbacks.engage&&e.callbacks.engage(e.$element,e);g=e.position_offset-(d-e.parentOffset_bottom);f={width:e.element_width+"px",left:e.element_offset.left+"px",top:g+"px"};e.$element.addClass(e.fixed_class)}else{f={width:"auto",left:"auto",top:"auto"};e.$element.removeClass(e.fixed_class);e.callbacks.disengage&&e.callbacks.disengage(e.$element,e)}}e.$element.css(f);if(e.isScrolling){requestAnimationFrame(function(){e.handleMovement()})}}};b.fn.ninjaStickyBox=function(e,d){return new a.NinjaStickyBox(this,e,d)}}(this,jQuery));
